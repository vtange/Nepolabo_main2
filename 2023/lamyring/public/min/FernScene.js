function FernScene(e){this.loadedFaceTextures=Object.create(null),FernSceneBase.call(this,e);new BABYLON.Layer("back","assets/ring/sky.jpg",this.self,!0);var r=BABYLON.Mesh.CreateGround("waterMesh",512,512,32,this.self,!1),t=new BABYLON.WaterMaterial("water",this.self,new BABYLON.Vector2(512,512));t.alpha=.32,t.alphaMode=1,t.bumpTexture=new BABYLON.Texture("assets/waterbump6.png",this.self),t.bumpAffectsReflection=!0,t.windForce=1,t.waveHeight=.2,t.bumpHeight=.05,t.waterColor=new BABYLON.Color3(.147,.23,.215),t.colorBlendFactor=.05,t.waterColor2=new BABYLON.Color3(.847,.23,.215),t.colorBlendFactor2=.3,t.specularColor=new BABYLON.Color3(1,1,1),t.specularPower=12,r.material=t,r.receiveShadows=!1,r.parent=this.camera,r.position.z=25,r.rotation.x=322*Math.PI/180,this.lighting[0].excludedMeshes.push(r),r.isPickable=!1;var o=new BABYLON.PointLight("p01",new BABYLON.Vector3(0,-1,.2),this.self);o.diffuse=new BABYLON.Color3(1,.9,.87),o.intensity=30,o.includedOnlyMeshes.push(r),o.parent=this.camera,o.range=99999,this.self.onBeforeCameraRenderObservable.add(e=>{r.parent=this.camera}),this.onTimeMinChange()}FernScene.prototype=Object.create(FernSceneBase.prototype),FernScene.prototype.constructor=FernScene;var cloudy=new BABYLON.Color3(135/255,132/255,115/255),daytime=new BABYLON.Color3(1,250/255,219/255),sunset=new BABYLON.Color3(176/255,125/255,99/255),night=new BABYLON.Color3(88/255,88/255,126/255),bluNight=new BABYLON.Color3(77/255,77/255,168/255),colorChart={0:bluNight,20:night,36:sunset,72:daytime,108:sunset,120:night,144:bluNight};function getToColorAndNumber(e){for(var r=e+1;r<=144;r++)if(colorChart[r])return{num:r,col:colorChart[r]};return null}function generateColorCharts(){for(var e=colorChart[0],r=0,t=getToColorAndNumber(0),o=t.col,a=t.num,n=0,i=0,s=r;s<=144;s++)if(colorChart[s]){if(redChart[s]=colorChart[s].r,grnChart[s]=colorChart[s].g,bluChart[s]=colorChart[s].b,colorChart[s]===o){if(e=o,r=s,!(t=getToColorAndNumber(s)))break;o=t.col,a=t.num}}else a>r&&(i=1-(n=(s-r)/(a-r)),redChart[s]=e.r*i+o.r*n,grnChart[s]=e.g*i+o.g*n,bluChart[s]=e.b*i+o.b*n);return{r:redChart,g:grnChart,b:bluChart}}var redChart=[],grnChart=[],bluChart=[];function formatTime(e){return 100*Math.floor(e/60)+e%60}generateColorCharts();var startingTime=762,timespan=document.createElement("span");timespan.id="format-time",timespan.innerHTML=formatTime(startingTime),FernScene.prototype.onTimeMinChange=function(){var e=this.self,r=this.time;Math.floor(r/10);timespan.innerHTML=formatTime(r),this.shadowGen&&(this.shadowGen.darkness=Math.min(1,Math.max(.5,Math.abs(r-720)/360))),e.lights[0].direction.x=(r<360?-r:r<1080?r-720:1440-r)/180,e.lights[0].direction.y=Math.abs(r-720)/1028-1};